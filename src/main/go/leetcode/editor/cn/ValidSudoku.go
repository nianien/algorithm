//36.valid-sudoku
//è¯·ä½ åˆ¤æ–­ä¸€ä¸ª 9x9 çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ æ ¹æ®ä»¥ä¸‹è§„åˆ™ ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚
//
//
// æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
// æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
// æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰
//
//
// æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ '.' è¡¨ç¤ºã€‚
//
// æ³¨æ„ï¼š
//
//
// ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚
// åªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚
//
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šboard =
//[['5','3','.','.','7','.','.','.','.']
//,['6','.','.','1','9','5','.','.','.']
//,['.','9','8','.','.','.','.','6','.']
//,['8','.','.','.','6','.','.','.','3']
//,['4','.','.','8','.','3','.','.','1']
//,['7','.','.','.','2','.','.','.','6']
//,['.','6','.','.','.','.','2','8','.']
//,['.','.','.','4','1','9','.','.','5']
//,['.','.','.','.','8','.','.','7','9']]
//è¾“å‡ºï¼štrue
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šboard =
//[['8','3','.','.','7','.','.','.','.']
//,['6','.','.','1','9','5','.','.','.']
//,['.','9','8','.','.','.','.','6','.']
//,['8','.','.','.','6','.','.','.','3']
//,['4','.','.','8','.','3','.','.','1']
//,['7','.','.','.','2','.','.','.','6']
//,['.','6','.','.','.','.','2','8','.']
//,['.','.','.','4','1','9','.','.','5']
//,['.','.','.','.','8','.','.','7','9']]
//è¾“å‡ºï¼šfalse
//è§£é‡Šï¼šé™¤äº†ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªæ•°å­—ä» 5 æ”¹ä¸º 8 ä»¥å¤–ï¼Œç©ºæ ¼å†…å…¶ä»–æ•°å­—å‡ä¸ ç¤ºä¾‹1 ç›¸åŒã€‚ ä½†ç”±äºä½äºå·¦ä¸Šè§’çš„ 3x3 å®«å†…æœ‰ä¸¤ä¸ª 8 å­˜åœ¨, å› æ­¤è¿™ä¸ªæ•°ç‹¬æ˜¯æ— 
//æ•ˆçš„ã€‚
//
//
//
// æç¤ºï¼š
//
//
// board.length == 9
// board[i].length == 9
// board[i][j] æ˜¯ä¸€ä½æ•°å­—æˆ–è€… '.'
//
// Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ çŸ©é˜µ
// ğŸ‘ 542 ğŸ‘ 0

package main

import "fmt"

//leetcode submit region begin(Prohibit modification and deletion)
func isValidSudoku(board [][]byte) bool {
	var m = map[string]*Position{}
	for i := range board {
		for j := range board[i] {
			if c := string(board[i][j]); c != "." {
				var v, ok = m[c]
				if !ok {
					/**
					  è¿™é‡ŒæŒ‡é’ˆå¼•ç”¨,ä¿è¯å±æ€§å˜åŒ–å¯è§
					*/
					v = &Position{
						Xs: map[int]int{},
						Ys: map[int]int{},
						Ns: map[int]int{},
					}
					m[c] = v
				}
				if !v.Check(i, j) {
					return false
				}
			}
		}
	}
	return true
}

type Position struct {
	/**
	  æ¨ªåæ ‡é›†åˆ
	*/
	Xs map[int]int
	/**
	  çºµåæ ‡é›†åˆ
	*/
	Ys map[int]int
	/**
	  åŒºåŸŸé›†åˆ
	*/
	Ns map[int]int
}

/**
æ£€æŸ¥mapçš„é”®å€¼æ˜¯å¦å­˜åœ¨, å¦‚æœä¸å­˜åœ¨,æ·»åŠ è¿”å›true,å¦åˆ™è¿”å›false
*/
func putIfAbsent(m map[int]int, k int) bool {
	if _, ok := m[k]; !ok {
		m[k] = 1
		return true
	} else {
		return false
	}
}

// Check /**
/**
åˆ¤æ–­x,yåæ ‡ä»¥åŠæ‰€åœ¨åŒºåŸŸå—æ˜¯å¦é‡å¤
*/
func (this *Position) Check(x int, y int) bool {
	return putIfAbsent(this.Xs, x) && putIfAbsent(this.Ys, y) && putIfAbsent(this.Ns, x/3+(y/3)*3)
}

//leetcode submit region end(Prohibit modification and deletion)

//test from here
func main() {
	var sd = [][]byte{
		{'5', '3', '.', '.', '7', '.', '.', '.', '.'},
		{'6', '.', '.', '1', '9', '5', '.', '.', '.'},
		{'.', '9', '8', '.', '.', '.', '.', '6', '.'},
		{'8', '.', '.', '.', '6', '.', '.', '.', '3'},
		{'4', '.', '.', '8', '.', '3', '.', '.', '1'},
		{'7', '.', '.', '.', '2', '.', '.', '.', '6'},
		{'.', '6', '.', '.', '.', '.', '2', '8', '.'},
		{'.', '.', '.', '4', '1', '9', '.', '.', '5'},
		{'.', '.', '.', '.', '8', '.', '.', '7', '9'}}
	fmt.Println(isValidSudoku(sd))
	var sd2 = [][]byte{
		{'8', '3', '.', '.', '7', '.', '.', '.', '.'},
		{'6', '.', '.', '1', '9', '5', '.', '.', '.'},
		{'.', '9', '8', '.', '.', '.', '.', '6', '.'},
		{'8', '.', '.', '.', '6', '.', '.', '.', '3'},
		{'4', '.', '.', '8', '.', '3', '.', '.', '1'},
		{'7', '.', '.', '.', '2', '.', '.', '.', '6'},
		{'.', '6', '.', '.', '.', '.', '2', '8', '.'},
		{'.', '.', '.', '4', '1', '9', '.', '.', '5'},
		{'.', '.', '.', '.', '8', '.', '.', '7', '9'}}
	fmt.Println(isValidSudoku(sd2))

}
